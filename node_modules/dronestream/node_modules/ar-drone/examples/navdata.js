// Prints out navdata received from the drone

var arDrone    = require('..');
var stream     = arDrone.createUdpNavdataStream();
var udpControl = arDrone.createUdpControl();

var fly = true;

setInterval(function() {
  udpControl.ref({fly: fly, emergency: true});
  udpControl.raw('CONFIG', '"general:navdata_demo"', '"FALSE"');
  udpControl.flush();
}, 30);

setTimeout(function() {
  fly = false;
}, 900);

stream.on('data', function(navdata) {
  console.log(navdata.pwm);
});
